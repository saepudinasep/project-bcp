<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Cek Hasil KBIJ | WOM Finance</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
      crossorigin="anonymous"
    />
  </head>
  <body class="bg-light">
    <div class="container py-3">
      <h1 class="mb-4 text-center">Cek Hasil KBIJ - WOM Finance</h1>
      <div class="card shadow-sm">
        <div class="card-header bg-primary text-white">
          <h5 class="mb-0 small">Silahkan Isi Form Dibawah Dengan Benar!</h5>
        </div>
        <div class="card-body">
          <h5 class="card-title">Request By</h5>
          <form id="faqForm" method="POST" novalidate>
            <!-- Brand and Region -->
            <div class="row mb-2">
              <div class="col-md-6">
                <label for="brand" class="form-label small text-muted"
                  >Brand</label
                >
                <select id="brand" class="form-select form-select-sm" required>
                  <option value="">-- Pilih Brand --</option>
                  <option value="nb">Reguler</option>
                  <option value="mas">MasKu</option>
                  <option value="mtr">MotorKu</option>
                  <option value="mbl">MobilKu</option>
                </select>
              </div>
              <div class="col-md-6">
                <label for="region" class="form-label small text-muted"
                  >Region</label
                >
                <select
                  id="region"
                  name="entry.900671353"
                  class="form-select form-select-sm"
                >
                  <option value="">-- Pilih Region --</option>
                  <!-- Region options will be added dynamically -->
                </select>
              </div>
            </div>

            <!-- Cabang and NIK -->
            <div class="row mb-2">
              <div class="col-md-6">
                <label for="cabang" class="form-label small text-muted"
                  >Cabang</label
                >
                <select
                  id="cabang"
                  name="entry.453750574"
                  class="form-select form-select-sm"
                >
                  <option value="">-- Pilih Cabang --</option>
                  <!-- Cabang options will be added dynamically -->
                </select>
              </div>
              <div class="col-md-6">
                <label for="nik" class="form-label small text-muted"
                  >NIK Karyawan</label
                >
                <input
                  type="number"
                  id="nik"
                  name="entry.349701399"
                  class="form-control form-control-sm"
                />
              </div>
            </div>

            <!-- Nama -->
            <div class="row mb-2">
              <div class="col-md-12">
                <label for="nama" class="form-label small text-muted"
                  >Nama</label
                >
                <input
                  type="text"
                  id="nama"
                  name="entry.349701399"
                  class="form-control form-control-sm"
                />
              </div>
            </div>
            <h5 class="card-title mt-4">Data Pemohon</h5>
            <!-- Nama Cust and NIK KTP -->
            <div class="row mb-4">
              <div class="col-md-6">
                <label for="NCust" class="form-label small text-muted"
                  >Nama Cust</label
                >
                <input
                  type="text"
                  id="NCust"
                  name="entry.349701399"
                  class="form-control form-control-sm"
                />
              </div>
              <div class="col-md-6">
                <label for="nikC" class="form-label small text-muted"
                  >NIK KTP</label
                >
                <input
                  type="number"
                  id="nikC"
                  name="entry.1285711467"
                  class="form-control form-control-sm"
                />
              </div>
            </div>

            <!-- Buttons -->
            <div class="mb-2">
              <button
                type="submit"
                id="submitButton"
                class="btn btn-primary btn-sm"
              >
                Submit
              </button>
              <button
                type="button"
                class="btn btn-secondary btn-sm"
                onclick="window.location.reload()"
              >
                Cancel
              </button>
            </div>
          </form>
        </div>
      </div>
    </div>

    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
      crossorigin="anonymous"
    ></script>

    <script>
      // Elements
      const regionSelect = document.getElementById("region");
      const cabangSelect = document.getElementById("cabang");

      // Fetch data from output.json
      fetch("output.json")
        .then((response) => {
          if (!response.ok) {
            throw new Error(`HTTP error! status: ${response.status}`);
          }
          return response.json();
        })
        .then((data) => {
          // Populate Region options dynamically
          const regions = [...new Set(data.map((item) => item.Region))];
          regions.forEach((region) => {
            const option = document.createElement("option");
            option.value = region;
            option.textContent = region;
            regionSelect.appendChild(option);
          });

          // Handle Region selection change
          regionSelect.addEventListener("change", function () {
            const selectedRegion = this.value;

            // Clear previous Cabang options
            cabangSelect.innerHTML =
              '<option value="">-- Pilih Cabang --</option>';

            // Filter Cabang options based on selected Region
            const filteredCabang = data.filter(
              (item) => item.Region === selectedRegion
            );
            filteredCabang.forEach((item) => {
              const option = document.createElement("option");
              option.value = item.Cabang;
              option.textContent = item.Cabang;
              cabangSelect.appendChild(option);
            });
          });
        })
        .catch((error) => {
          console.error("Error fetching JSON:", error);
        });
    </script>
  </body>
</html>
